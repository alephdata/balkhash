language: python
python:
    - "3.6"

addons:
  postgresql: 9.6

install:
  - pip install coverage twine pytest
  - pip install -e ".[leveldb]" ".[sql]"

script:
  - pytest

after_success:
  # push tag as well
  - if [[ $TRAVIS_TAG = $TRAVIS_BRANCH ]]; then
      python setup.py sdist bdist_wheel ;
      twine upload dist/* ;
    fi
